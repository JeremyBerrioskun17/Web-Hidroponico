:root{
  --hm-accent: #16a34a;
  --hm-accent-2: #15803d;
  --hm-bg: #ffffff;
  --hm-text: #0f172a;
  --hm-muted: #64748b;
  --hm-border: rgba(15,23,42,0.12);

  --z-modal: 6000;
  --z-backdrop: 5900;
}

/* Modal encima de todo */
.modal.modal-fix-z{ z-index: var(--z-modal) !important; }
.modal-backdrop{ z-index: var(--z-backdrop) !important; }

/* ✅ más grande (desktop) */
.hidro-dialog{
  width: min(1040px, calc(100vw - 32px));
  max-width: min(1040px, calc(100vw - 32px));
  margin: 16px auto;
}

/* ✅ ESTRUCTURA: header + body(scroll) + footer */
.hidro-modal{
  border-radius: 16px;
  overflow: hidden;
  background: var(--hm-bg);
  border: 1px solid var(--hm-border);
  box-shadow: 0 26px 70px rgba(2,6,23,0.35);
  position: relative;

  display: flex;
  flex-direction: column;

  /* alto máximo en escritorio para que se vea "pro" */
  max-height: calc(100vh - 40px);
}

/* Animación suave */
.hidro-modal{ animation: popIn 0.18s ease; }
@keyframes popIn {
  from { transform: translateY(-8px) scale(0.99); opacity: 0; }
  to { transform: translateY(0) scale(1); opacity: 1; }
}

.hidro-form{ display: contents; }

/* HEADER mejorado */
.hidro-header{
  border-bottom: 1px solid rgba(15,23,42,0.08);
  padding: 16px 18px;
  background: #fff;

  /* fijo dentro del modal */
  flex: 0 0 auto;
}

.icon-header{
  width: 48px;
  height: 48px;
  border-radius: 12px;
  background: rgba(22,163,74,0.12);
  border: 1px solid rgba(22,163,74,0.18);
  color: var(--hm-accent-2);
  display: grid;
  place-items: center;
  font-size: 1.2rem;
}

.hidro-header h5{
  font-weight: 900;
  letter-spacing: -0.01em;
}

.hidro-subtitle{
  color: var(--hm-muted);
  font-size: 0.92rem;
  margin-top: 2px;
}

/* BODY: SIEMPRE scrollea */
.hidro-body{
  padding: 18px;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  flex: 1 1 auto;
  background: #fff;
}

/* allow flex child to shrink properly so overflow works on mobile */
.hidro-modal .hidro-body{ min-height: 0; }

.hidro-body-spacer{ height: 6px; }

/* Labels */
.form-label{
  font-size: 0.92rem;
  font-weight: 800;
  color: var(--hm-text);
}

/* Inputs */
.input-group-soft .input-group-text{
  width: 46px;
  justify-content: center;
  background: rgba(22,163,74,0.10);
  border-color: rgba(22,163,74,0.18);
  color: var(--hm-accent-2);
}

.input-group-soft .form-control,
.input-group-soft .form-select{
  border-color: rgba(15,23,42,0.16);
  transition: box-shadow .16s ease, border-color .16s ease;
}

.input-group-soft .form-control:focus,
.input-group-soft .form-select:focus{
  border-color: rgba(22,163,74,0.45);
  box-shadow: 0 0 0 0.18rem rgba(22,163,74,0.14);
}

.field-hint{
  margin-top: 6px;
  font-size: 0.82rem;
  color: var(--hm-muted);
  line-height: 1.25;
}

.obs-foot{
  margin-top: 6px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
}

.char-count{
  font-size: 0.82rem;
  font-weight: 800;
  color: var(--hm-muted);
}
.char-count.is-max{ color: #dc2626; }

/* FOOTER: fijo visible */
.hidro-footer{
  border-top: 1px solid rgba(15,23,42,0.08);
  background: rgba(15,23,42,0.02);
  padding: 12px 16px;

  flex: 0 0 auto;

  display: flex;
  justify-content: flex-end;
  gap: 10px;
}

/* Buttons */
.btn-ui{
  border-radius: 10px !important;
  padding: 0.55rem 0.95rem;
  font-weight: 800;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

.btn-ui-primary{
  background: var(--hm-accent) !important;
  border-color: var(--hm-accent) !important;
  color: #fff !important;
}

.btn-ui-primary:hover{
  background: var(--hm-accent-2) !important;
  border-color: var(--hm-accent-2) !important;
  color: #fff !important;
}

/* Trigger-specific primary (outside footer) */
.btn-new-hidro{
  background: var(--hm-accent) !important;
  border-color: var(--hm-accent) !important;
  color: #fff !important;
  display: inline-flex !important;
  align-items: center !important;
  gap: 8px !important;
  padding: 0.45rem 0.85rem !important;
  box-shadow: 0 6px 18px rgba(22,163,74,0.12) !important;
  min-width: 120px !important;
  justify-content: center !important;
  text-align: center !important;
}
.btn-new-hidro:hover{
  background: var(--hm-accent-2) !important;
  border-color: var(--hm-accent-2) !important;
  color: #fff !important;
}

/* Red primary used for Cancel / destructive in this modal */
.btn-ui-danger{
  background: #dc2626 !important;
  border-color: #dc2626 !important;
  color: #fff !important;
}
.btn-ui-danger:hover{
  background: #b91c1c !important;
  border-color: #b91c1c !important;
  color: #fff !important;
}

/* Submit button in modal footer: verde con texto blanco */
.btn-submit-green{
  background: var(--hm-accent) !important;
  border-color: var(--hm-accent) !important;
  color: #fff !important;
  padding: 0.45rem 0.85rem !important;
  font-weight: 800 !important;
  box-shadow: 0 6px 16px rgba(22,163,74,0.12) !important;
}
.btn-submit-green:hover{
  background: var(--hm-accent-2) !important;
  border-color: var(--hm-accent-2) !important;
  color: #fff !important;
}

/* Loading overlay */
.modal-loading-overlay{
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  background: rgba(2,6,23,0.55);
  z-index: 50;
}

.loader-box{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:8px;
  padding:18px 22px;
  background: rgba(0,0,0,0.35);
  color: #fff;
  border-radius: 12px;
  min-width: 240px;
}

/* ============================
   RESPONSIVE
============================ */

/* Tablet: ancho completo + modal alto correcto */
@media (max-width: 991px){
  .hidro-dialog{
    width: calc(100vw - 18px);
    max-width: calc(100vw - 18px);
    margin: 9px auto;
  }

  .hidro-modal{
    max-height: calc(100vh - 18px);
    border-radius: 14px;
  }

  .hidro-body{
    padding: 14px;
  }
}

/* ✅ Móvil: full screen real, botones siempre visibles */
@media (max-width: 575px){
  .hidro-dialog{
    width: 100vw !important;
    max-width: 100vw !important;
    height: 100vh;
    margin: 0 !important;
  }

  .hidro-modal{
    height: 100vh;
    max-height: 100vh;
    border-radius: 0;
  }

  .hidro-header{
    padding: 14px 14px;
  }

  .hidro-body{
    padding: 12px;
  }

  /* ensure last inputs are reachable and not hidden behind the sticky footer */
  .hidro-body{ padding-bottom: 86px; }

  /* Footer con botones en columna (más cómodo) */
  .hidro-footer{
    display: grid;
    grid-template-columns: 1fr;
    gap: 10px;
    padding: 12px;
    /* keep footer visible when the body scrolls on mobile */
    position: sticky;
    bottom: 0;
    z-index: 12;
  }

  .hidro-footer .btn-ui{
    width: 100%;
  }

  .input-group-soft .input-group-text{
    width: 44px;
  }
}

/* Mejor para teclado móvil */
@supports (height: 100dvh){
  @media (max-width: 575px){
    .hidro-dialog{ height: 100dvh; }
    .hidro-modal{ height: 100dvh; max-height: 100dvh; }
  }
}
